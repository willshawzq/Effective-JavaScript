## 了解你使用的JavaScript版本

### 重点
+ **决定你的应用程序支持Javascript的哪些版本**
+ **确保你使用的任何JavaScript的特性对于应用程序将要运行的所有环境都是支持的**
+ **总是在执行严格模式检查的环境中测试严格代码**
+ **当心连接那些在不同模式下有不同预期的脚本**

根据本节的重点就可以看出，本小节主要考虑的就是严格模式的使用问题。目前`ES6`已经发布一年多了，但是目前`ES5`的覆盖率还没完全垄断市场，主要原因还就是老版`IE`。

为了代码在不同的模式（严格模式和普通模式）下，能够有相同的结果。选用严格模式来禁止使用一些JavaScript语言中问题较多或易于出错的特性，是防止出现一些意外情况的好选择。

开启严格模式，仅需在程序最开始的地方加上：`use strict`这个字符串即可。由于解释执行字符串字面量不会有任何副作用，故而它很好的做到了向后兼容。

因为老环境中没有及你选哪个严格模式的检查，所以我们的代码必须是要在严格模式下编写和测试，才能提早发现问题。比如：
```
function f(x) {
  "use strict";
  var arguments = [];//Uncaught SyntaxError: Unexpected eval or arguments in strict mode
}
```
在严格模式下，是不能对arguments变量进行重定义的，连重新赋值都不可以。但在非严格模式下，上面的重定义操作是被允许的。

在一个团队中，大家代码都是分开开发的，但是在上线的时候，必然要把多个文件合并成一个。这就会出现这种情况：
 ```
 //file1.js
 "use strict";
 function f1(x) {
   //body
 }

 //file2.js
 //no strict-mode directive
 function f2() {
   //body
 }
 ```
当一个使用了严格模式，另一个没有使用严格模式时，他们的拼接顺序会带来很大的影响。上面说过，开启严格模式要在程序的最开始的位置。那如果file1.js先于file2.js,那打包好的文件所在的`作用域`都处于
严格模式下，那file2.js中的代码就可能会出问题。如果file2.js在前，则整个作用域都处于非严格模式下运行。

如果想去除外界的影响，就需要将代码包裹在一个立即执行的函数表达式中（IIFE），这样每个文件就有一个单独的作用域，在当前`作用域`最开始的位置加上`use strict`即可，这样我们的这份代码在两种模式下行为都是一致的，并不会被外界环境影响。
